<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Emma Market</title>

<style>
body{font-family:Arial;margin:0;background:#f4f4f6;}

header{
 background:#6c3eb8;
 color:white;
 padding:18px;
 display:flex;
 justify-content:space-between;
 align-items:center;
}

#carritoBtn,#adminBtn{
 background:white;
 color:#6c3eb8;
 border:none;
 padding:8px 14px;
 border-radius:8px;
 cursor:pointer;
 font-weight:bold;
 margin-left:5px;
}

#catalogo{
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
 gap:25px;
 padding:20px;
}

.card{
 background:white;
 border-radius:14px;
 padding:15px;
 text-align:center;
 box-shadow:0 3px 10px rgba(0,0,0,0.08);
}

.card img{
 width:100%;
 height:170px;
 object-fit:cover;
 border-radius:10px;
}

.precio{color:#6c3eb8;font-weight:bold;font-size:20px;}

button{
 background:#25D366;
 border:none;
 color:white;
 padding:10px;
 border-radius:8px;
 cursor:pointer;
 margin-top:10px;
 width:100%;
 font-weight:bold;
}

/* CARRITO */
#carrito{
 position:fixed;
 right:-350px;
 top:0;
 width:350px;
 height:100%;
 background:white;
 box-shadow:-5px 0 15px rgba(0,0,0,.2);
 padding:15px;
 transition:.4s;
 overflow:auto;
}
#carrito.activo{right:0;}

/* PANEL ADMIN */
#admin{
 position:fixed;
 left:-350px;
 top:0;
 width:350px;
 height:100%;
 background:#fff;
 box-shadow:5px 0 15px rgba(0,0,0,.2);
 padding:15px;
 transition:.4s;
}
#admin.activo{left:0;}

input{width:100%;padding:8px;margin-bottom:8px;}
</style>
</head>

<body>

<header>
<div>Emma Market üíú</div>
<div>
<button id="adminBtn">‚öôÔ∏è Panel</button>
<button id="carritoBtn">üõí (<span id="contador">0</span>)</button>
</div>
</header>

<div id="catalogo"></div>

<!-- PANEL ADMIN SECRETO -->
<div id="admin">
<h3>Agregar producto</h3>
<input id="nombre" placeholder="Nombre">
<input id="precio" placeholder="Precio">
<input id="imagen" placeholder="Imagen (img/foto.jpg)">
<button onclick="agregarProducto()">Guardar producto</button>
</div>

<!-- CARRITO -->
<div id="carrito">
<h2>Tu pedido</h2>
<div id="listaCarrito"></div>
<div>Total: $<span id="total">0</span></div>
<button onclick="enviarPedido()">Enviar por WhatsApp</button>
</div>

<script>

/* PRODUCTOS GUARDADOS */
let productos=JSON.parse(localStorage.getItem("productos"))||[
{nombre:"Aceite Condesa",precio:80,imagen:"img/aceite.jpg"},
{nombre:"Az√∫car",precio:75,imagen:"img/azucar.jpg"}
];

let carrito=[];

const catalogo=document.getElementById("catalogo");
const contador=document.getElementById("contador");
const listaCarrito=document.getElementById("listaCarrito");
const totalEl=document.getElementById("total");

function guardar(){
 localStorage.setItem("productos",JSON.stringify(productos));
}

function render(){
 catalogo.innerHTML="";
 productos.forEach(p=>{
  const card=document.createElement("div");
  card.className="card";
  card.innerHTML=`
  <img src="${p.imagen}" onerror="this.src='img/default.jpg'">
  <h3>${p.nombre}</h3>
  <p class="precio">$${p.precio}</p>
  <button onclick="agregarCarrito('${p.nombre}')">Agregar al carrito</button>
  `;
  catalogo.appendChild(card);
 });
}

function agregarProducto(){

 const nombre=document.getElementById("nombre").value;
 const precio=document.getElementById("precio").value;
 const imagen=document.getElementById("imagen").value;

 productos.push({nombre,precio:Number(precio),imagen});
 guardar();
 render();
 alert("Producto agregado üíú");
}

function agregarCarrito(nombre){
 const prod=productos.find(p=>p.nombre===nombre);
 carrito.push(prod);
 actualizarCarrito();
}

function actualizarCarrito(){
 let total=0;
 listaCarrito.innerHTML="";
 carrito.forEach(p=>{
  total+=p.precio;
  listaCarrito.innerHTML+=`<div>${p.nombre} - $${p.precio}</div>`;
 });
 contador.textContent=carrito.length;
 totalEl.textContent=total;
}

document.getElementById("carritoBtn").onclick=()=>{
 document.getElementById("carrito").classList.toggle("activo");
}

document.getElementById("adminBtn").onclick=()=>{
 document.getElementById("admin").classList.toggle("activo");
}

function enviarPedido(){

 let mensaje="Hola! quiero pedir:%0A";
 carrito.forEach(p=>{
  mensaje+=`- ${p.nombre} $${p.precio}%0A`;
 });

 const numero="598XXXXXXXX"; // üëâ TU WHATSAPP
 window.open(`https://wa.me/${numero}?text=${mensaje}`);
}

render();

</script>

</body>
</html>
